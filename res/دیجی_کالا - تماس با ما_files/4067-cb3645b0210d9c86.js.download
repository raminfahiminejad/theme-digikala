"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4067],{10055:function(e,t,n){n.d(t,{i:function(){return c}});var i=n(66383),s=n(2784),r=n(43997),o=n(64665),a=n(64177),l=n(83178),d=n(42306);function c(){var e=(0,i.Z)((0,s.useState)("hidden"),2),t=e[0],n=e[1],c=(0,a.C)().isDesktop,u=(0,r.v9)(l.n.isWebView),p=(0,d.d)(o.X.SUPER_APP_WEB_PILLARS_VIEW);return(0,s.useEffect)(function(){if(!c&&!u&&p){var e,t,i=function(e){n(e.detail.variant)};return(null==window?void 0:null===(e=window.SuperWebSDK)||void 0===e?void 0:null===(t=e.navigationTabState)||void 0===t?void 0:t.variant)&&n(window.SuperWebSDK.navigationTabState.variant),window.addEventListener("superWebNavigationTabState",i),function(){window.removeEventListener("superWebNavigationTabState",i)}}},[]),{superWebState:t}}},14067:function(e,t,n){n.d(t,{c:function(){return G}});var i=n(47842),s=n(70865),r=n(96670),o=n(26297),a=n(66383),l=n(23945),d=n(52322),c=n(2784),u=n(43997),p=n(5632),m=n(17156),v=n(57931),f=n(54497),g=n(27174),x=n(73092),h=n(77353),b=n(64665),w=n(88413),L=n(93008),P=n(43202),j=n(26442),N=n(64177),y=n(51275),S=n(83178),_=n(42306),E=n(9406),C=n(22848),R=n(72762),k=n(41435),I=n(72677),T=n(50020),W=n(5759),Z=n(23075),F=n(10055),B=n(59641),A=n(94301),D=n(5769),z=n(18455),H=n(38416),O=n(50030),q=n(15847),M=n(46621),V=n.n(M),X={},K=(0,_.d)(b.X.PLP_INFINITE_SCROLL),Q={};function G(e){var t,n=e.pages,M=void 0===n?[]:n,G=e.data,J=e.pending,U=void 0!==J&&J,Y=e.fetchNextPage,$=e.hasNextPage,ee=e.pageNumber,et=void 0===ee?1:ee,en=e.shouldHideProductListHeader,ei=(e.productListHeaderSlot,e.shouldHideDesktopSidebar),es=e.sidebarSlot,er=e.stickyBottomSlot,eo=e.stickySlot,ea=e.showFirstAd,el=e.params,ed=void 0===el?{}:el,ec=e.changeParams,eu=e.itemsKey,ep=void 0===eu?"products":eu,em=e.disableClassicPagination,ev=void 0===em?K:em,ef=e.itemComponent,eg=e.wrapperClassName,ex=e.emptyComponent,eh=void 0===ex?(0,d.jsx)(x.T,{}):ex,eb=e.bannersComponent,ew=e.handelDisplayResult,eL=e.categoryResultSearch,eP=e.hasSearchInstead,ej=e.advertisementProducts,eN=e.advertisementBrand,ey=e.advertisementSponsoredBrand,eS=e.pendingAutoComplete,e_=(0,a.Z)((0,c.useState)(0),2),eE=e_[0],eC=e_[1],eR=G||X,ek=eR.sort,eI=eR.pager,eT=eR.filters,eW=eR.category,eZ=eR.quickFilters,eF=ed||X,eB=eF[P.uR],eA=eF[P.tn],eD=(eF[P.fH],(0,o.Z)(eF,[P.uR,P.tn,P.fH].map(l.Z))),ez=(0,_.d)(b.X.LITE_PLP_PRESERVE_SCROLL)||(0,m.cC)("plp-preserve-state"),eH=(0,c.useRef)(null);(0,c.useLayoutEffect)(function(){if(ez){var e=Q[window.location.href];if("number"==typeof e){var t=function(){var n,i=(null==eH?void 0:null===(n=eH.current)||void 0===n?void 0:n.clientHeight)||0;window.scrollTo(0,e-i),p.Router.events.off("routeChangeComplete",t)};return p.Router.events.on("routeChangeComplete",t),function(){p.Router.events.off("routeChangeComplete",t)}}}},[]),(0,c.useEffect)(function(){if(ez){var e=function(){Q[window.location.href]=window.scrollY};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}},[]);var eO=(0,W.h)(eA),eq=(0,y.pL)()||{},eM=eq.cartPayablePrice,eV=eq.cartPrice,eX=(0,c.useRef)(),eK=(0,B.a)({term:"search/ai"}),eQ=(0,B.a)({term:"search/"}),eG=(0,N.C)().isDesktop,eJ=(0,E.e)(),eU=(0,c.useMemo)(function(){return ei||!eG||!U&&(0,k.x)(eT)||eJ},[eG,ei,U,eT,eJ]),eY=(et>=L.yo||eO)&&!ev,e$=(0,c.useMemo)(function(){return((et>L.yo||eO)&&!ev?[[et,M[et]]]:Object.entries(M)).filter(function(e){var t=(0,a.Z)(e,2)[1];return!(0,T.k)(t)&&!(0,k.x)(t)})},[M,et,ev,eO]),e0=(0,c.useMemo)(function(){var e,t;return!U&&(0,k.x)(null===(e=Object.entries(M)[0])||void 0===e?void 0:null===(t=e[1])||void 0===t?void 0:t[ep])},[U,M,ep]),e4=(0,c.useMemo)(function(){return!U&&(0,k.x)(G)},[U,G]),e1=!en&&!e4;(0,c.useEffect)(function(){return document.body.classList.add("overscroll-y-none"),function(){document.body.classList.remove("overscroll-y-none")}},[]);var e2=(0,a.Z)((0,c.useState)(!1),2),e7=e2[0],e5=e2[1];(0,c.useLayoutEffect)(function(){var e=function(){eX.current&&e5(eX.current.getBoundingClientRect().top<0)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}},[eX]);var e6=(0,h.g)(eZ,!U&&1===et),e3=e6.quickFilters,e8=e6.hasQuickFilters,e9=(0,c.useMemo)(function(){return(0,k.x)(eT)?null:e1&&(0,_.d)(b.X.AB_TEST_FILTER_NEW_DESIGN)&&!eG?(0,d.jsx)(O.x,{sort:(0,r.Z)((0,s.Z)({},ek),{sortActiveOptionId:eB}),pager:eI,pending:U,filters:eT,params:ed,quickFilters:e3,changeParams:ec,category:eW,isScrolledPage:e7,textLenzEligibility:null==G?void 0:G.textLenzEligibility,onQuickFiltersResize:eC,quickFiltersRef:eH}):(0,d.jsx)(D.z,{sort:(0,r.Z)((0,s.Z)({},ek),{sortActiveOptionId:eB}),pager:eI,pending:U,filters:eT,params:eD,changeParams:ec,category:eW})},[e1,eW,ec,eT,eG,e7,eD,eI,ed,U,ek,eB,e3,null==G?void 0:G.textLenzEligibility]),te=(0,F.i)().superWebState,tt=(0,u.v9)(S.n.isWebView);return(0,d.jsxs)("div",{id:"ProductListPagesWrapper",className:(0,I.d)("relative w-full flex flex-col lg:flex-row items-center lg:items-stretch justify-between",V().ProductList__wrapper,eg),ref:eX,children:[(0,d.jsxs)("section",{className:"w-full grow relative",children:[(0,d.jsx)("div",{className:(0,I.d)("lg:static sticky lg:top-14 top-15 bg-neutral-000 z-3",{"top-14":"hidden"===te&&eQ&&!eK,"top-28":"compact"===te,"!top-0":tt}),children:e9}),e8&&(0,d.jsx)("div",{style:{height:eE,width:"100%"}}),!eG&&(0,k.x)(eP)&&eL&&!(0,C.J)()&&!eK&&(0,d.jsx)(g.m,{handelDisplayResult:ew,categories:eL,pending:eS}),!eG&&(!(0,k.x)(ej)||!(0,k.x)(eN))&&!eK&&(0,d.jsx)(Z.y,{advertisement:ey,position:w.BE.TOP_FILTER,className:(0,I.d)("mb-0 lg:mb-5 -mx-5 lg:mx-0",{"border-complete-t-200":(0,k.x)(eP)&&eL})}),!eG&&eI&&(0,d.jsx)(q.L,{totalItems:null==eI?void 0:eI.pagerTotalItems,pending:U}),(0,d.jsxs)("div",{className:(0,I.d)(V().ProductList__pagesContainer,(t={},(0,i.Z)(t,V()["ProductList__pagesContainer--withSidebar"],!eU||eJ),(0,i.Z)(t,V()["ProductList__pagesContainer--withoutSidebar"],eU||!eJ),t)),children:[e0?(0,d.jsx)("div",{className:V().ProductList__emptyWrapper,children:eh}):e$.map(function(e,t){var n=(0,a.Z)(e,2),i=n[0],s=n[1];return(0,d.jsx)(z.L,{page:s,bannersComponent:eb,pageIndex:t,itemComponent:ef,showFirstAd:ea&&!eG},i)}),(0,d.jsx)(H.N,{fetchNextPage:Y,hasNextPage:void 0!==$&&$,pager:eI,pageNumber:et,pending:U,showSkeleton:(0,k.x)(e$),shouldShowClassicPagination:eY,changeParams:ec})]})]}),!eU&&(0,d.jsxs)("section",{className:(0,I.d)("flex flex-col",V().ProductList__sidebar),children:[es,(0,d.jsxs)(f.L,{enabled:!0,bottomBoundary:"#ProductListPagesWrapper",children:[eo,eG&&(0,d.jsx)(A.T,{filters:eT,params:eD,changeParams:ec,pending:U,category:eW}),(0,d.jsx)("div",{className:"py-3"}),er]})]}),(0,E.e)()&&eG&&(0,d.jsx)("section",{className:(0,I.d)("flex flex-col mt-16",V().ProductList__coupon),children:(0,d.jsx)(f.L,{enabled:!0,bottomBoundary:"#ProductListPagesWrapper",children:(0,d.jsxs)("div",{className:(0,I.d)("border-complete border-neutral-300 p-4 rounded-lg background-white"),children:[(0,d.jsx)("div",{className:"text-neutral-500 text-lg",children:"شما در اینجا جمع هزینه‌ی کالا‌های کالابرگی را بدون احتساب تخفیف کالابرگ مشاهده می‌کنید"}),(0,d.jsx)("div",{className:"border-complete-b border-b-neutral-500 h-1 my-4"}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsxs)("div",{className:"flex w-full",children:[(0,d.jsx)("span",{children:"جمع مبلغ سبد کالابرگی"}),(0,d.jsxs)("div",{className:"mr-auto",children:[(0,d.jsxs)("span",{className:"bold",children:[(0,R.j)(eV)," "]}),(0,d.jsx)("span",{className:"font-bold",children:"تومان"})]})]}),(0,d.jsx)(v.z,{className:"mt-4 w-full",disabled:!eM,to:(0,j.qR)(),children:"تایید و تکمیل سفارش"})]})]})})})]})}}}]);
