"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6572],{46572:function(e,t,n){n.d(t,{L:function(){return F}});var r=n(70865),i=n(96670),a=n(2784),o=n(47842),u=n(26297),l=n(66383),s=n(50930),f=n(23945),d=n(41435),c=n(12694),v=n(5759),Z=n(29890),p=n(14529),g=n(50020),m=n(72873),h=n(43202),y=n(49174),O=n(53091),P=n(5632),C={},S={items:C,pages:C,data:{},fetched:!1};function M(e){var t,n,a,l,s,c=e.oldData,v=c.items,m=c.data,h=c.pages,y=e.newPage,O=e.itemsKey,P=(null==y?void 0:null===(s=y.pager)||void 0===s?void 0:s.pagerCurrentPage)||1;return{items:(0,i.Z)((0,r.Z)({},void 0===v?C:v),(0,o.Z)({},P,(null==y?void 0:y[O])||[])),data:(n=(t={data:y,itemsKey:O,oldData:m}).data,a=t.itemsKey,l=t.oldData,!(0,p.K)(n)||(0,Z.k)(n)||(0,g.k)(n)||(0,d.x)(n)?l:(n[a],(0,u.Z)(n,[a].map(f.Z)))),pages:(0,i.Z)((0,r.Z)({},void 0===h?C:h),(0,o.Z)({},P,P)),fetched:!(0,g.k)(y)}}var I=n(70423),x=n(46198),K=n(82332),R=n(74740),w=n(35929),k=n(45162),E=n(24606),A=n(10896),D={isOpen:!1,filterKey:null,filterTitle:null,filterItem:null},T={};function F(e){var t,n,F,Q,b,H,V,q,N,U,X,B,L,_,j,Y,z,G,W,$,J,ee,et,en,er,ei,ea,eo,eu,el,es,ef,ed,ec,ev,eZ,ep,eg,em,eh,ey,eO,eP,eC,eS=e.apiMethod,eM=e.apiData,eI=e.disabled,ex=e.onSuccess,eK=e.onError,eR=e.itemsKey,ew=e.isPagination,ek=e.defaultActiveFilters,eE=e.defaultActiveSort,eA=e.shouldSaveOnChange,eD=e.ssrData,eT=e.shouldScrollOnChange,eF=e.disableQueryParams,eQ=e.getSSRMethods,eb=e.notHandledByUseSSR,eH=function(e){var t=e.defaultActiveFilters,n=void 0===t?T:t,v=e.shouldSaveOnChange,Z=e.shouldScrollOnChange,m=void 0===Z||Z,y=e.disableQueryParams,C=(0,P.useRouter)(),S=C.asPath,M=C.push,F=C.replace,Q=C.query,b=C.pathname,H=C.isReady;C.events;var V=(0,l.Z)((0,a.useState)((0,r.Z)({},n)),2),q=V[0],N=V[1],U=(0,a.useRef)(!1),X=(0,a.useMemo)(function(){return function e(t){if(!(0,p.K)(t)||Array.isArray(t))return t;var n={},r=!0,i=!1,a=void 0;try{for(var o,u=Object.entries(t)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=(0,l.Z)(o.value,2),f=s[0],d=s[1];(0,p.K)(d)&&!Array.isArray(d)?(n[f]=(0,x.Q)(d),(0,p.K)(n[f])&&!Array.isArray(n[f])&&(n[f]=e(n[f]))):n[f]=d}}catch(c){i=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(y?q:(0,k.Q)(S))},[S,q,y]),B=(0,a.useMemo)(function(){X[h.uR],X[h.fH],X[h.tn];var e=(0,u.Z)(X,[h.uR,h.fH,h.tn].map(f.Z));return!(0,d.x)(e)},[X]),L=(0,a.useMemo)(function(){return Object.entries(Q).reduce(function(e,t){var n=(0,l.Z)(t,2),a=n[0],u=n[1];return -1!==b.indexOf(a)?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a,u)):(0,r.Z)({},e)},{})},[b,Q]),_=(0,l.Z)((0,a.useState)(n),2),j=_[0],Y=_[1],z=(0,l.Z)((0,a.useState)(!1),2),G=z[0],W=z[1],$=(0,l.Z)((0,a.useState)(D),2),J=$[0],ee=$[1],et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;return Y(function(){return(0,R.m)(e)?function(t){return(0,c.s)(e(t))}:(0,c.s)(e)})},en=(0,a.useMemo)(function(){return!(0,O.X)(X,j)},[j,X]),er=null==j?void 0:j[h.uR],ei=null==X?void 0:X[h.uR],ea=(0,l.Z)((0,a.useState)(!1),2),eo=ea[0],eu=ea[1],el=(0,a.useMemo)(function(){return!(0,K.t)(ei,er)},[er,ei]),es=(0,l.Z)((0,a.useState)(!1),2),ef=es[0],ed=es[1],ec=function(e){var t=e.newUrl,n=e.scroll,i=e.shallow,a=void 0===i||i,o=e.appendQuery;if(y){var u=(0,k.Q)(t);N((0,r.Z)({},void 0!==o&&o?X:T,u)),n&&I.NY.scrollToTop();return}U.current?(U.current=!0,n&&I.NY.scrollToTop(),M(t,void 0,{scroll:!!(null!=n?n:m),shallow:a})):F(t,void 0,{scroll:!!(null!=n?n:m),shallow:a})},ev=function(e){var t,n=e.query;ec({newUrl:(0,A.K)({queries:(t={},(0,o.Z)(t,h.fH,n),(0,o.Z)(t,h.tn,void 0),t),url:window.location.pathname}),scroll:!0})};function eZ(e){var t,a=e.activeFilters,u=void 0===a?n:a,l=e.shallow,s=e.fragment,f=(0,c.s)((0,i.Z)((0,r.Z)({},u),(t={},(0,o.Z)(t,h.uR,u[h.uR]||X[h.uR]),(0,o.Z)(t,h.fH,X[h.fH]),(0,o.Z)(t,h.tn,void 0),t)));ec({newUrl:(0,E.m)((0,A.K)({queries:f,url:window.location.pathname}),s),scroll:m,shallow:l})}var ep=function(){et((0,c.s)((0,r.Z)({},n||T,X)))};function eg(){W(!1)}function em(e){var t=e.shallow;eg(j),eZ({activeFilters:j,shallow:t})}function eh(){eg()}function ey(){eZ({activeFilters:(0,o.Z)({},h.uR,ei)}),eg()}function eO(){eu(!1)}function eP(){et((0,i.Z)((0,r.Z)({},j),(0,o.Z)({},h.uR,ei))),eO()}function eC(){et((0,i.Z)((0,r.Z)({},j),(0,o.Z)({},h.uR,ei))),eO()}function eS(){ed(!1)}(0,a.useEffect)(function(){ep()},[S,q]);var eM=(0,a.useMemo)(function(){return(0,w.S)(S)},[S]);return{filterExtra:J,activeFilters:j,filterOnClick:function(e){var t=e.isAccordion,n=e.filterKey,i=e.filterItem,a=e.filterType,u=e.filterTitle,l=e.filterOptionId,f=e.filterOptionMax,c=e.filterOptionMin,Z=e.filterOptionValueMin,m=e.filterOptionValueMax,y=e.shouldSendDataToServer,P=e.shallow;if(t){ee(function(e){var t=e.isOpen,r=e.filterKey;return{isOpen:!(t&&(0,O.X)(n,r)),filterTitle:u,filterKey:n,filterItem:i}});return}var C=function(e){var t,n=e.filterKey,i=e.filterType,a=e.activeFilters,u=e.filterOptionId,l=e.filterOptionMin,f=e.filterOptionMax,c=e.filterOptionValueMin,v=e.filterOptionValueMax,Z=(0,p.K)(n),m=Z?n.keyId:n,y=null==n?void 0:n.keyCode,O=(null==a?void 0:a[y])||T,P=Z?null===(t=a[y])||void 0===t?void 0:t[m]:a[n];if((0,K.t)(h.kQ.CHECKBOX,i)){var C=function(e){var t=e.filterOptionId,n=e.filterItem,r=e.filterKey,i=Array.isArray(n)?n:(0,x.Q)(n)||[];if(null===(a=i.find)||void 0===a?void 0:a.call(i,function(e){return(0,K.t)(e,t)})){var a,u,l=null===(u=i.filter)||void 0===u?void 0:u.call(i,function(e){return!(0,K.t)(e,t)});return(0,o.Z)({},r,(0,d.x)(l)?void 0:l)}return(0,o.Z)({},r,(0,s.Z)(i).concat([t]))}({filterItem:P,filterKey:m,filterOptionId:u});return(0,r.Z)({},a||T,Z?(0,o.Z)({},y,(0,r.Z)({},O,C)):C)}if([h.kQ.RADIO,h.kQ.BUTTON].includes(i)){var S,M,I,R=(M=(S={filterItem:P,filterKey:n,filterOptionId:u}).filterKey,I=S.filterOptionId,(0,o.Z)({},M,I));return(0,r.Z)({},a||T,Z?(0,o.Z)({},y,(0,r.Z)({},O,R)):R)}if((0,K.t)(h.kQ.SLIDER,i)){var w,k,E,A,D,F,Q,b,H=(E=(w={filterKey:n,filterOptionMax:f,filterOptionMin:l,filterOptionValueMin:c,filterOptionValueMax:v}).filterOptionMin,A=w.filterOptionMax,D=w.filterOptionValueMin,F=w.filterOptionValueMax,Q=w.filterKey,b=(0,K.t)(A,F)&&(0,K.t)(E,D),(0,o.Z)({},Q,b?void 0:(k={},(0,o.Z)(k,h.LS,D),(0,o.Z)(k,h.o$,F),k)));return(0,r.Z)({},a||T,Z?(0,o.Z)({},y,(0,r.Z)({},O,H)):H)}if([h.kQ.BOOLEAN,h.kQ.SWITCH].includes(i)){var V,q,N,U,X=(q=(V={filterItem:P,filterKey:n,filterOptionId:u}).filterItem,N=V.filterKey,U=V.filterOptionId,(0,o.Z)({},N,(0,g.k)(q)?U:void 0));return(0,r.Z)({},a||T,Z?(0,o.Z)({},y,(0,r.Z)({},O,X)):X)}if((0,K.t)(h.kQ.CATEGORY_LIST,i)){var B,L,_,j=(L=(B={filterKey:n,filterOptionId:u}).filterKey,_=B.filterOptionId,(0,o.Z)({},L,(0,g.k)(_)?void 0:[_]));return(0,r.Z)({},a||T,Z?(0,o.Z)({},y,(0,r.Z)({},O,j)):j)}return(0,r.Z)({},a||T)}({filterKey:n,filterType:a,filterOptionId:l,filterOptionMin:c,filterOptionMax:f,filterOptionValueMin:Z,filterOptionValueMax:m,activeFilters:j});y||v?eZ({activeFilters:C,shallow:P}):et(C)},filterClear:ey,filterIsModalOpen:G,filterOpenModal:function(){W(!0)},filterCloseModal:eg,filterSaveChanges:em,filterCancelChanges:eh,filterHasChanged:en,activeSortId:er,submittedSortId:ei,sortOnClick:function(e){var t=e.sortOptionId;e.shouldSendDataToServer||v?(eZ({activeFilters:(0,i.Z)((0,r.Z)({},j),(0,o.Z)({},h.uR,t))}),eO()):et((0,i.Z)((0,r.Z)({},j),(0,o.Z)({},h.uR,t)))},sortIsModalOpen:eo,sortOpenModal:function(){eu(!0)},sortCloseModal:eO,sortSaveChanges:eP,sortCancelChanges:eC,sortHasChanged:el,allIsModalOpen:ef,allOpenModal:function(){ed(!0)},allCloseModal:eS,allSaveChanges:function(){eP(),em(),eS()},allCancelChanges:function(){eC(),eh(),eS()},allClear:function(){ey(),eC(),eS()},onSearch:ev,onPageChange:function(e){ec({newUrl:(0,A.K)({queries:(0,o.Z)({},h.tn,e),url:window.location.href}),scroll:m,appendQuery:!0})},searchOnClearParam:function(){ev(T)},searchParam:X[h.fH],queryParams:X,reinitializeQueryParams:function(){ep()},urlParams:L,isReady:H,hasFilter:B,fragment:eM,changeFragment:function(e){eZ({fragment:e,activeFilters:j})}}}({defaultActiveFilters:void 0===ek?{}:ek,defaultActiveSort:void 0===eE?null:eE,shouldSaveOnChange:eA,shouldScrollOnChange:eT,disableQueryParams:eF,isPagination:ew}),eV=(0,a.useMemo)(function(){var e;return eQ?null==eQ?void 0:null===(e=eQ({query:eH.urlParams||{}}))||void 0===e?void 0:e[0]:{apiMethod:eS,apiData:eM}},[eH.isReady,eH.urlParams,eM]),eq=(n=(t=(0,i.Z)((0,r.Z)({},eV),{queryParams:eH.queryParams,disabled:eI,notHandledByUseSSR:eb||!!eS,onSuccess:ex,onError:eK,onPageChange:eH.onPageChange,itemsKey:eR,isPagination:ew,ssrData:(0,Z.k)(eD)?null==eD?void 0:eD[0]:eD})).apiMethod,F=t.apiData,Q=t.queryParams,b=t.disabled,H=t.onSuccess,V=t.onError,N=void 0===(q=t.itemsKey)?"products":q,U=t.isPagination,X=t.ssrData,L=void 0!==(B=t.notHandledByUseSSR)&&B,_=t.onPageChange,j=(0,P.useRouter)(),Y=(0,a.useRef)(null),z=(0,a.useRef)(!1),W=(G=(0,l.Z)((0,a.useState)(Q.page||1),2))[0],$=G[1],ee=(J=(0,l.Z)((0,a.useState)(M({oldData:S,newPage:X,itemsKey:N})),2))[0],et=J[1],(0,a.useEffect)(function(){(null==Q?void 0:Q.page)&&W!==Q.page&&$(null==Q?void 0:Q.page)},[null==Q?void 0:Q.page]),er=(en=(0,a.useMemo)(function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pager;if(!((0,g.k)(t)||1>+t.pagerCurrentPage||+t.pagerCurrentPage>=+t.pagerTotalPages))return t.pagerCurrentPage+1}(ee.data),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pager;if(!((0,g.k)(t)||2>+t.pagerCurrentPage||+t.pagerCurrentPage>=+t.pagerTotalPages))return t.pagerCurrentPage-1}(ee.data);return{nextPageParam:e,hasNextPage:!!e,previousPageParam:t,hasPreviousPage:!!t}},[ee.data])).nextPageParam,ei=en.hasNextPage,ea=en.previousPageParam,eo=en.hasPreviousPage,eu=(0,a.useMemo)(function(){return(0,r.Z)({},(0,c.s)((0,r.Z)({},F||{},Q||{})))},[F,Q]),el=(0,a.useRef)(eu),es=(0,a.useMemo)(function(){return(0,i.Z)((0,r.Z)({},eu),(0,o.Z)({},h.tn,Q.page||W))},[eu,W]),ef=(0,a.useRef)(!1),ed=(0,a.useRef)(L),ec=(0,a.useRef)(eu),ev=void 0!==b&&b||!L&&(z.current||!ed.current||(0,O.X)(eu,ec.current)&&1===W),eZ=void 0!==U&&U||1===W||ef.current||Q.page,ep=function(e){if(e&&(0,d.x)(e)){et(function(e){return(0,i.Z)((0,r.Z)({},e),{fetched:!0,items:eZ?[]:e.items})});return}var t,n,a,o,u=(n=(t={newPage:e}).newPage,a=t.reset,et(o=M({oldData:(0,i.Z)((0,r.Z)({},ee),{items:eZ||a?C:ee.items}),newPage:n,itemsKey:N})),o);el.current=eu,ef.current=!1,z.current=!1,null==H||H(e,u)},em=(eg=(0,m.V)({apiMethod:n,apiData:es,onSuccess:ep,onError:V,disabled:ev})).pending,eh=eg.hasError,ey=eg.reload,(0,a.useEffect)(function(){(0,g.k)(X)||L||ed.current||(ep(X),ed.current=!0,ec.current=(0,r.Z)({},eu))},[X]),(0,a.useEffect)(function(){var e=function(e){var t=new URL(e,window.location.href).pathname;z.current=!(0,O.X)(Y.current,t),Y.current=t};return j.events.on("routeChangeStart",e),function(){j.events.off("routeChangeStart",e)}},[]),(0,a.useEffect)(function(){eP({page:(null==Q?void 0:Q.page)||1})},[j.asPath]),(0,a.useEffect)(function(){ev&&!L&&(ed.current||(0,O.X)(ec.current,eu))?ep(X):ef.current=!(0,O.X)(eu,el.current)},[eu]),eO=function(e){(0,v.h)(e)&&$(e)},eP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=void 0===t?1:t,a=e.updatePageParam;et((0,i.Z)((0,r.Z)({},ee),{fetched:!1,items:[]})),void 0!==a&&a?null==_||_(n):W===n?ey():eO(n)},eC=(em||!ee.fetched||ef.current)&&!eh,(0,i.Z)((0,r.Z)({},ee),{items:eZ&&eC?C:ee.items,hasError:eh,pending:eC,hasPreviousPage:eo,hasNextPage:ei,fetchNextPage:function(){ei&&$(er)},fetchPreviousPage:function(){eo&&$(ea)},fetchPage:eO,addItem:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];et(function(e){var n=(0,r.Z)({},(null==e?void 0:e.items)||{});return t.forEach(function(e){var t=e.page,r=e.index,i=e.item;n[t]=(0,y.Q)({array:n[t],index:r,item:i})}),(0,i.Z)((0,r.Z)({},e),{items:n})})},removeItem:function(e){var t=e.itemIndex;et(function(e){var n,a,u,f,d,c=Object.entries(null==e?void 0:e.items).reduce(function(e,n){var r=(0,l.Z)(n,2),i=r[0],a=r[1];return e.isFound?e:t<a.length+e.count?{page:i,index:t-e.count,isFound:!0}:{count:e.count+a.length}},{count:0}),v=c.page,p=c.index,g=(0,i.Z)((0,r.Z)({},null==e?void 0:e.items),(0,o.Z)({},v,(0,s.Z)((u=void 0===(a=(n={array:null==e?void 0:null===(d=e.items)||void 0===d?void 0:d[v],index:p}).array)?[]:a,f=n.index,(0,Z.k)(u)?(0,s.Z)(u.filter(function(e,t){return f!==t})):[]))));return(0,i.Z)((0,r.Z)({},e),{items:g})})},updateItem:function(e){var t=e.itemIndex,n=e.newData;et(function(e){var a,u,f,d,c,v,p,g,m=Object.entries(null==e?void 0:e.items).reduce(function(e,n){var r=(0,l.Z)(n,2),i=r[0],a=r[1];return e.isFound?e:t<a.length+e.count?{page:i,index:t-e.count,isFound:!0}:{count:e.count+a.length}},{count:0}),h=m.page,y=m.index,O=(0,i.Z)((0,r.Z)({},null==e?void 0:e.items),(0,o.Z)({},h,(0,s.Z)((f=void 0===(u=(a={array:null==e?void 0:null===(v=e.items)||void 0===v?void 0:v[h],index:y,item:(0,r.Z)({},(null==e?void 0:null===(p=e.items)||void 0===p?void 0:null===(g=p[h])||void 0===g?void 0:g[y])||{},n)}).array)?[]:u,d=a.index,c=a.item,(0,Z.k)(f)?(0,s.Z)(f.map(function(e,t){return d===t?c:e})):[]))));return(0,i.Z)((0,r.Z)({},e),{items:O})})},resetItems:eP,page:W,apiData:es,isAPIDataChangedRef:ef}));return(0,r.Z)({},eq,eH)}}}]);
